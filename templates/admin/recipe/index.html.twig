{% extends 'admin/admin.html.twig' %}
{% block title %}Every recipes!
{% endblock %}

{% block body %}
	Durée totale des recette présentes: {{total}}min

    <div id="flash"></div>

	<p>
		<a class="btn btn-primary btn-sm" href="{{ path('admin.recipe.create') }}"> Créer une recette </a>
	</p>
	<table class="table">
		<thead>
		<tr>
			<th>{{knp_pagination_sortable(recipes, 'ID', 'r.id')}}</th>
			<th>{{knp_pagination_sortable(recipes, 'Titre', 'r.title')}}</th>
			<th>Catégorie</th>
			<th style="width: 200px">Actions</th>
		</tr>
		</thead>
		<tbody>

		{% for recipe in recipes %}
		<tr id="row_recipe_{{ recipe.getId() }}">
			<td>{{ recipe.id }} </td>
			<td>
                <turbo-frame id="recipe_{{ recipe.getId() }}">
				    <a href="{{ path('admin.recipe.edit', {id: recipe.getId()}) }}">{{recipe.getTitle()}}</a>
                </turbo-frame>
			</td>
			<td> {{ recipe.category.name | default('')}} </td>
			<td>
				<div class="d-flex gap-1">
					<a class="btn btn-primary btn-sm" href="{{ path('admin.recipe.edit', {id: recipe.id}) }}"> Editer </a>
					<form action="{{ path('admin.recipe.delete', {id: recipe.id}) }}" method="post">
						<input type="hidden" name="_method" value="DELETE">
						<button type="submit" class="btn btn-danger btn-sm">Supprimer</button>
					</form>
				</div>
			</td>
		{% endfor %}
		</tbody>
	</table>

	{{ knp_pagination_render(recipes) }}
	{#
	<div class="d-flex">
		{% if page > 1%}
			<a href="{{ path('admin.recipe.index', {page: page - 1})}}" class="btn btn-secondary">Page précédente</a>
		{% endif %}

		{% if page < maxPage%}
			<a href="{{ path('admin.recipe.index', {page: page + 1})}}" class="btn btn-secondary">Page suivante</a>
		{% endif %}
	</div>
	#}
{% endblock %}
